
jQuery.Class("Vtiger_EmailPreview_Js",{},{getEmailActionsParams:function(e){var c=new Array();var a=jQuery('[name="parentRecord"]').val();c.push(a);var b=jQuery('[name="recordId"]').val();var d={};d.module="Emails";d.view="ComposeEmail";d.selected_ids=c;d.record=b;d.mode=e;d.parentId=a;d.relatedLoad=true;return d},registerEventsForActionButtons:function(){var a=this;jQuery('[name="previewForward"],[name="previewEdit"], [name="previewPrint"]').on("click",function(b){Vtiger_Index_Js.checkMailConfig().then(function(e){if(e==true){var g=jQuery(b.currentTarget).data("mode");var f=a.getEmailActionsParams(g);var d=(typeof f=="string")?f:jQuery.param(f);var c="index.php?"+d;self.location.href=c}else{Vtiger_Helper_Js.showPnotify(app.vtranslate("JS_EMAIL_SERVER_CONFIGURATION"))}})})},registerEvents:function(){this.registerEventsForActionButtons()}});jQuery(document).ready(function(){var a=new Vtiger_EmailPreview_Js();a.registerEvents();var b=(jQuery(document).height())+"px";jQuery(".SendEmailFormStep2").css("height",b)});