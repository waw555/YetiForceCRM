
jQuery.Class("Settings_Vtiger_OutgoingServer_Js",{},{saveOutgoingDetails:function(b){var a=this;var c=b.serializeFormData();var d=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});if(typeof c=="undefined"){c={}}c.module=app.getModuleName();c.parent=app.getParentModuleName();c.action="OutgoingServerSaveAjax";AppConnector.request(c).then(function(f){if(f.success){var e=b.data("detailUrl");a.loadContents(e).then(function(g){a.registerDetailViewEvents();d.progressIndicator({mode:"hide"})},function(g,h){d.progressIndicator({mode:"hide"})})}else{d.progressIndicator({mode:"hide"});jQuery(".errorMessage",b).removeClass("hide");jQuery(".errorMessage .alert",b).append("<br>").append(f.error.message)}},function(e,f){})},loadContents:function(b){var a=jQuery.Deferred();AppConnector.requestPjax(b).then(function(c){jQuery(".contentsDiv").html(c);a.resolve(c)},function(c,d){a.reject()});return a.promise()},registerEditViewEvents:function(){var c=this;var b=jQuery("#OutgoingServerForm");var a=jQuery(".cancelLink",b);var d=app.validationEngineOptions;d.onValidationComplete=function(f,e){if(e){c.saveOutgoingDetails(f);return e}};b.validationEngine(d);b.submit(function(f){f.preventDefault()});a.click(function(h){var f=b.data("detailUrl");var g=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});c.loadContents(f).then(function(e){g.progressIndicator({mode:"hide"});c.registerDetailViewEvents()},function(e,i){g.progressIndicator({mode:"hide"})})})},registerDetailViewEvents:function(){var b=this;var a=jQuery("#OutgoingServerDetails");var c=jQuery(".editButton",a);c.click(function(g){var f=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});var d=c.data("url");b.loadContents(d).then(function(e){b.registerEditViewEvents();f.progressIndicator({mode:"hide"})},function(e,h){f.progressIndicator({mode:"hide"})})})},registerEvents:function(){var a=this;if(jQuery("#OutgoingServerForm").length>0){a.registerEditViewEvents()}else{a.registerDetailViewEvents()}}});jQuery(document).ready(function(b){var a=new Settings_Vtiger_OutgoingServer_Js();a.registerEvents()});