
Settings_Workflows_Edit_Js("Settings_Workflows_Edit1_Js",{},{init:function(){this.initialize()},getContainer:function(){return this.step1Container},setContainer:function(a){this.step1Container=a;return this},initialize:function(a){if(typeof a=="undefined"){a=jQuery("#workflow_step1")}if(a.is("#workflow_step1")){this.setContainer(a)}else{this.setContainer(jQuery("#workflow_step1"))}},submit:function(){var a=jQuery.Deferred();var b=this.getContainer();var d=b.serializeFormData();var c=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});AppConnector.request(d).then(function(e){b.hide();c.progressIndicator({mode:"hide"});a.resolve(e)},function(e,f){});return a.promise()},registerEventForScheduledWorkflow:function(){var d=this;jQuery('input[name="execution_condition"]').on("click",function(h){var g=jQuery(h.currentTarget);var f=jQuery("#scheduleBox");if(g.is(":checked")&&g.val()=="6"){f.removeClass("hide")}else{f.addClass("hide")}});app.registerEventForClockPicker($(".clockPicker"));app.registerEventForDatePickerFields("#scheduleByDate",true);jQuery("#annualDates").chosen();jQuery("#schdayofweek").chosen();jQuery("#schdayofmonth").chosen();var b=new Date().getFullYear();var a=jQuery("#weekStartDay").data("value");jQuery("#annualDatePicker").datepick({autoSize:true,firstDay:a,multiSelect:100,monthsToShow:[1,2],minDate:"01/01/"+b,maxDate:"12/31/"+b,yearRange:b+":"+b,onShow:function(){d.removeYearInAnnualWorkflow()},onSelect:function(k){var i=[];var e=[];var h="";var g=jQuery("#annualDates");d.updateAnnualDates(g);for(index in k){var f=k[index];i.push({id:d.DateToYMD(f),text:d.DateToYMD(f)});e.push(d.DateToYMD(f));h+="<option selected value="+d.DateToYMD(f)+">"+d.DateToYMD(f)+"</option>"}g.append(h);g.trigger("chosen:updated")}});var c=jQuery("#annualDates");d.updateAnnualDates(c);c.trigger("chosen:updated")},removeYearInAnnualWorkflow:function(){setTimeout(function(){var b=jQuery(".datepick-month.first").find(".datepick-month-year").get(1);jQuery(b).hide();var a=$(".datepick-month-header");jQuery.each(a,function(c,d){var f=jQuery(d);var e=f.html().replace(/[\d]+/,"");f.html(e)})},100)},updateAnnualDates:function(c){c.html("");var d=jQuery("#hiddenAnnualDates").val();if(d){var a="";var b=JSON.parse(d);for(j in b){a+="<option selected value="+b[j]+">"+b[j]+"</option>"}c.html(a)}},DateToYMD:function(b){var c,d,a;c=String(b.getFullYear());d=String(b.getMonth()+1);if(d.length==1){d="0"+d}a=String(b.getDate());if(a.length==1){a="0"+a}return c+"-"+d+"-"+a},registerEventForChangeInScheduledType:function(){var a=this;jQuery("#schtypeid").on("change",function(d){var b=jQuery(d.currentTarget);var c=b.val();a.showScheduledTime();a.hideScheduledWeekList();a.hideScheduledMonthByDateList();a.hideScheduledSpecificDate();a.hideScheduledAnually();if(c=="1"){a.hideScheduledTime()}else{if(c=="3"){a.showScheduledWeekList()}else{if(c=="4"){a.showScheduledSpecificDate()}else{if(c=="5"){a.showScheduledMonthByDateList()}else{if(c=="7"){a.showScheduledAnually()}}}}}})},hideScheduledTime:function(){jQuery("#scheduledTime").addClass("hide")},showScheduledTime:function(){jQuery("#scheduledTime").removeClass("hide")},hideScheduledWeekList:function(){jQuery("#scheduledWeekDay").addClass("hide")},showScheduledWeekList:function(){jQuery("#scheduledWeekDay").removeClass("hide")},hideScheduledMonthByDateList:function(){jQuery("#scheduleMonthByDates").addClass("hide")},showScheduledMonthByDateList:function(){jQuery("#scheduleMonthByDates").removeClass("hide")},hideScheduledSpecificDate:function(){jQuery("#scheduleByDate").addClass("hide")},showScheduledSpecificDate:function(){jQuery("#scheduleByDate").removeClass("hide")},hideScheduledAnually:function(){jQuery("#scheduleAnually").addClass("hide")},showScheduledAnually:function(){jQuery("#scheduleAnually").removeClass("hide")},registerEvents:function(){var a=this.getContainer();a.find('[type="submit"]').removeAttr("disabled");var b=app.validationEngineOptions;b.onValidationComplete=function(d,c){return c};b.promptPosition="bottomRight";a.validationEngine(b);this.registerEventForScheduledWorkflow();this.registerEventForChangeInScheduledType()}});